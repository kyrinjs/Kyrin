# Kyrin Framework v0.0.2

<p align="center">
  <strong>‚ö° High-Performance Minimal Web Framework for Bun</strong>
</p>

<p align="center">
  Fast ‚Ä¢ Minimal ‚Ä¢ TypeScript-First ‚Ä¢ Zero Config
</p>

---

## üÜï What's New in v0.0.2

- **Route Groups** - Organize routes into separate files with prefixes
- **Performance Optimizations** - Faster path parsing and reduced async overhead
- **Improved Body Parsing** - `c.body<T>()`, `c.text()`, `c.formData()`
- **Better TypeScript** - Full type inference for handlers

---

## üí° TypeScript: Context Parameter

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠ install ‡∏à‡∏≤‡∏Å npm

‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ `c` ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ TypeScript ‡∏à‡∏∞ infer type ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:

```typescript
import { Kyrin, Router } from "kyrin";

const app = new Kyrin();
const user = new Router();

// ‚úÖ c ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Context ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!
app.get("/", (c) => c.json({ message: "Hello!" }));
user.get("/:id", (c) => ({ id: c.param("id") }));
```

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠ develop ‡∏à‡∏≤‡∏Å source

‡∏ñ‡πâ‡∏≤‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏à‡∏≤‡∏Å source ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡∏ï‡πâ‡∏≠‡∏á import `Context` type:

```typescript
import { Router } from "../src/router/router";
import type { Context } from "../src/context/context";

const user = new Router();

// ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏ type ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å npm package
user.get("/:id", (c: Context) => ({ id: c.param("id") }));
```

1. [Basic Routing](#-basic-routing)
2. [Route Parameters](#-route-parameters)
3. [Query Parameters](#-query-parameters)
4. [Request Body](#-request-body)
5. [Response Helpers](#-response-helpers)
6. [Auto Response](#-auto-response)
7. [Route Groups](#-route-groups) ‚≠ê NEW
8. [Headers](#-headers)
9. [Redirects](#-redirects)
10. [Configuration](#Ô∏è-configuration)
11. [API Reference](#-api-reference)

---

## üõ£Ô∏è Basic Routing

```typescript
const app = new Kyrin();

app.get("/users", (c) => c.json({ users: [] }));
app.post("/users", (c) => c.json({ created: true }, 201));
app.put("/users/:id", (c) => c.json({ updated: true }));
app.delete("/users/:id", (c) => c.json({ deleted: true }));

// Register all methods at once
app.all("/health", () => "OK");

// Method chaining
app
  .get("/", () => "Home")
  .get("/about", () => "About")
  .listen(3000);
```

---

## üéØ Route Parameters

```typescript
// Single parameter
app.get("/users/:id", (c) => ({
  id: c.param("id"),
}));

// Multiple parameters
app.get("/users/:userId/posts/:postId", (c) => ({
  userId: c.param("userId"),
  postId: c.param("postId"),
}));

// Wildcard (catch-all)
app.get("/files/*", (c) => ({
  path: c.param("wildcard"),
}));
```

---

## üîç Query Parameters

```typescript
// GET /search?q=hello&page=2
app.get("/search", (c) => ({
  query: c.query("q"), // "hello"
  page: c.query("page"), // "2"
  limit: c.query("limit"), // null
}));
```

---

## üì• Request Body

### JSON Body (with TypeScript)

```typescript
interface CreateUser {
  name: string;
  email: string;
}

app.post("/users", async (c) => {
  // Option 1: Generic type
  const body = await c.body<CreateUser>();

  // Option 2: Destructure directly
  const { name, email } = await c.body<CreateUser>();

  return c.json({ created: name }, 201);
});
```

### Text & FormData

```typescript
// Raw text body
app.post("/webhook", async (c) => {
  const raw = await c.text();
  return { received: true };
});

// Form data
app.post("/upload", async (c) => {
  const form = await c.formData();
  const file = form.get("file");
  return { uploaded: true };
});
```

---

## üì§ Response Helpers

```typescript
// JSON
c.json({ data: "value" }, 200);

// Plain text
c.send("Hello World", 200);

// HTML
c.html("<h1>Hello</h1>", 200);

// Redirect
c.redirect("/new-url", 302);

// Not Found
c.notFound();
```

---

## ‚ú® Auto Response

| Return Type        | Response           |
| ------------------ | ------------------ |
| `object` / `array` | `application/json` |
| `string`           | `text/plain`       |
| `null` / `void`    | `204 No Content`   |
| `Response`         | As-is              |

```typescript
app.get("/json", () => ({ users: [] })); // Auto JSON
app.get("/text", () => "Hello"); // Auto Text
app.delete("/users/:id", () => null); // 204 No Content
```

---

## üì¶ Route Groups ‚≠ê NEW

Organize routes into separate files with prefixes.

### 1. Create Route Files

```typescript
// routes/user.ts
import { Router } from "kyrin";

const user = new Router();

user.get("/", () => ({ users: [] })); // GET /users
user.get("/:id", (c) => ({ id: c.param("id") })); // GET /users/:id
user.post("/", async (c) => {
  const body = await c.body<{ name: string }>();
  return c.json({ created: body.name }, 201);
});

export default user;
```

```typescript
// routes/post.ts
import { Router } from "kyrin";

const post = new Router();

post.get("/", () => ({ posts: [] }));
post.get("/:id/comments", (c) => ({
  postId: c.param("id"),
  comments: [],
}));

export default post;
```

### 2. Mount in Main App

```typescript
// index.ts
import { Kyrin } from "kyrin";
import userRoutes from "./routes/user";
import postRoutes from "./routes/post";

const app = new Kyrin();

// Mount with prefix
app.route("/users", userRoutes); // All user routes under /users
app.route("/posts", postRoutes); // All post routes under /posts

// Root routes
app.get("/", () => ({ name: "My API", version: "1.0.0" }));

app.listen(3000);
```

### 3. Result

```
GET  /users          ‚Üí user.get("/")
GET  /users/:id      ‚Üí user.get("/:id")
POST /users          ‚Üí user.post("/")
GET  /posts          ‚Üí post.get("/")
GET  /posts/:id/comments ‚Üí post.get("/:id/comments")
```

### üìÅ Recommended Structure

```
src/
‚îú‚îÄ‚îÄ index.ts              # Main app
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ user.ts           # /users routes
‚îÇ   ‚îú‚îÄ‚îÄ post.ts           # /posts routes
‚îÇ   ‚îî‚îÄ‚îÄ auth.ts           # /auth routes
‚îî‚îÄ‚îÄ ...
```

---

## üìã Headers

```typescript
app.get("/protected", (c) => {
  const auth = c.header("Authorization");

  if (!auth) {
    return c.json({ error: "Unauthorized" }, 401);
  }

  return { success: true };
});
```

---

## üîÑ Redirects

```typescript
app.get("/old", (c) => c.redirect("/new")); // 302
app.get("/permanent", (c) => c.redirect("/new", 301)); // 301
```

---

## ‚öôÔ∏è Configuration

```typescript
const app = new Kyrin({
  port: 3000,
  hostname: "0.0.0.0",
  development: true,
});

app.listen(); // Uses config port
app.listen(8080); // Override port
```

---

## üîß API Reference

### Kyrin Class

| Method                  | Description                 |
| ----------------------- | --------------------------- |
| `get(path, handler)`    | Register GET route          |
| `post(path, handler)`   | Register POST route         |
| `put(path, handler)`    | Register PUT route          |
| `delete(path, handler)` | Register DELETE route       |
| `patch(path, handler)`  | Register PATCH route        |
| `all(path, handler)`    | Register all methods        |
| `route(prefix, router)` | Mount router with prefix ‚≠ê |
| `listen(port?)`         | Start server                |

### Context (c)

#### Request

| Property/Method  | Type                | Description  |
| ---------------- | ------------------- | ------------ |
| `c.req`          | `Request`           | Raw request  |
| `c.method`       | `string`            | HTTP method  |
| `c.path`         | `string`            | Request path |
| `c.headers`      | `Headers`           | All headers  |
| `c.header(name)` | `string \| null`    | Get header   |
| `c.param(name)`  | `string \| null`    | Path param   |
| `c.query(name)`  | `string \| null`    | Query param  |
| `c.body<T>()`    | `Promise<T>`        | JSON body    |
| `c.text()`       | `Promise<string>`   | Text body    |
| `c.formData()`   | `Promise<FormData>` | Form body    |

#### Response

| Method                     | Description   |
| -------------------------- | ------------- |
| `c.json(data, status?)`    | JSON response |
| `c.send(text, status?)`    | Text response |
| `c.html(html, status?)`    | HTML response |
| `c.redirect(url, status?)` | Redirect      |
| `c.notFound()`             | 404 response  |

---

## üìÑ License

MIT ¬© Kyrin Framework
